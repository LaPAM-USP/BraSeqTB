- name: braseqtb-search_help
  command: bash -c 'bin/braseqtb/braseqtb-search.py --help > braseqtb-search.txt'
  tags:
    - braseqtb
    - braseqtb_help
    - braseqtb_search
  files:
    - path: braseqtb-search.txt
      contains: ['exit', 'braseqtb', 'search', 'ENA']

- name: braseqtb-multiple_accessions
  command: bash -c 'bin/braseqtb/braseqtb-search.py PRJNA480016,SAMN01737350,SRR578340 --limit 5' 
  tags:
    - braseqtb
    - braseqtb_subcommand
    - braseqtb_search
  files:
    - path: ena-accessions.txt
      contains: ['SRX456']
    - path: ena-filtered.txt
      contains: ['accession', 'reason']
    - path: ena-results.txt
      contains: ['PRJNA176393', 'Staphylococcus', 'ABI_SOLID', 'PAIRED', 'ILLUMINA']
    - path: ena-summary.txt
      contains: ['QUERY', 'FILTERED', 'MISSING', 'FASTQS']

- name: braseqtb-bioproject
  command: bash -c 'bin/braseqtb/braseqtb-search.py PRJNA480016 --limit 5'
  tags:
    - braseqtb
    - braseqtb_subcommand
    - braseqtb_search
  files:
    - path: ena-accessions.txt
      contains: ['RX']
    - path: ena-filtered.txt
      contains: ['accession', 'reason']
    - path: ena-results.txt
      contains: ['PRJNA480016', 'Staphylococcus', 'fastq', 'PAIRED', 'ILLUMINA']
    - path: ena-summary.txt
      contains: ['QUERY', 'FILTERED', 'MISSING', 'FASTQS']

- name: braseqtb-taxid
  command: bash -c 'bin/braseqtb/braseqtb-search.py 1280 --limit 5'
  tags:
    - braseqtb
    - braseqtb_subcommand
    - braseqtb_search
  files:
    - path: ena-accessions.txt
      contains: ['RX']
    - path: ena-filtered.txt
      contains: ['accession', 'reason']
    - path: ena-results.txt
      contains: ['sra', 'Staphylococcus', 'aureus', 'fastq', 'WGS']
    - path: ena-summary.txt
      contains: ['QUERY', 'FILTERED', 'MISSING', 'FASTQS']

- name: braseqtb-species
  command: bash -c 'bin/braseqtb/braseqtb-search.py "Staphylococcus aureus" --limit 5'
  tags:
    - braseqtb
    - braseqtb_subcommand
    - braseqtb_search
  files:
    - path: ena-accessions.txt
      contains: ['RX']
    - path: ena-filtered.txt
      contains: ['accession', 'reason']
    - path: ena-results.txt
      contains: ['sra', 'Staphylococcus', 'aureus', 'fastq', 'WGS']
    - path: ena-summary.txt
      contains: ['QUERY', 'FILTERED', 'MISSING', 'FASTQS']

- name: braseqtb-biosample
  command: bash -c 'bin/braseqtb/braseqtb-search.py SAMN01737350 --limit 5'
  tags:
    - braseqtb
    - braseqtb_subcommand
    - braseqtb_search
  files:
    - path: ena-accessions.txt
    - path: ena-filtered.txt
      contains: ['accession', 'reason']
    - path: ena-results.txt
      contains: ['study_accession', 'Staphylococcus', 'ABI_SOLID', 'PAIRED', 'SAMN01737350']
    - path: ena-summary.txt
      contains: ['QUERY', 'FILTERED', 'MISSING', 'FASTQS']

- name: braseqtb-run_accession
  command: bash -c 'bin/braseqtb/braseqtb-search.py SRR578340 --limit 5'
  tags:
    - braseqtb
    - braseqtb_subcommand
    - braseqtb_search
  files:
    - path: ena-accessions.txt
    - path: ena-filtered.txt
      contains: ['accession', 'reason']
    - path: ena-results.txt
      contains: ['PRJNA176393', 'Staphylococcus', 'ABI_SOLID', 'PAIRED', 'study_accession']
    - path: ena-summary.txt
      contains: ['QUERY', 'FILTERED', 'MISSING', 'FASTQS']

- name: braseqtb-accession_file
  command: bash -c 'bin/braseqtb/braseqtb-search.py ./braseqtb-tests/data/test-search-accessions.txt --limit 5'
  tags:
    - braseqtb
    - braseqtb_subcommand
    - braseqtb_search
  files:
    - path: ena-accessions.txt
      contains: ['SRX456']
    - path: ena-filtered.txt
      contains: ['accession', 'reason']
    - path: ena-results.txt
      contains: ['PRJNA176393', 'Staphylococcus', 'ABI_SOLID', 'PAIRED', 'ILLUMINA']
    - path: ena-summary.txt
      contains: ['QUERY', 'FILTERED', 'MISSING', 'FASTQS']
